{
  "version": 3,
  "sources": ["../../src/scripts/_partials/_admin/_user/_user_avatar.js"],
  "sourcesContent": ["// wait until document is loaded\ndocument.addEventListener('DOMContentLoaded', e => {\n  const toggleModalView = () => {\n    document.getElementById(\"profile-avatar-picker\")?.classList.toggle(\"hidden\");\n  }\n  // show modal\n  document.querySelector('.user-profile-picture')?.addEventListener('click', e => {\n    toggleModalView()\n  })\n  // close modal\n  document.querySelector('.profile-avatar-picker--modal--close')?.addEventListener('click', e => {\n    toggleModalView()\n  })\n\n  document.querySelector('input[name=\"profile_avatar\"]')?.addEventListener('change', e => {\n    const avatarLabel = document.querySelector('label[for=\"profile_avatar\"]');\n    const data = new FormData();\n    let selectedFile = e.target.files[0];\n    let currentEditUserId = document.querySelector('input[name=\"user_id\"]').value;\n    avatarLabel.classList.remove(\"success\");\n    data.append(\"action\", \"setUploadedAvatarUrl\");\n    data.append(\"avatar\", selectedFile);\n    data.append(\"user_id\", currentEditUserId);\n\n    fetch(ams.url, {\n      method: \"POST\",\n      credentials: 'same-origin',\n      body: data\n    })\n      .then(response => response.json())\n      .then(resp => {\n        if (resp.data.avatar_url !== \"\") {\n          let avatarMessage = document.querySelector('span.profile_avatar_message');\n          document.querySelector('input[name=\"avatar_url\"]').value = resp.data.avatar_url;\n          document.querySelector('tr.user-profile-picture td img').remove()\n          // TODO: fix image live changing\n          document.querySelector('tr.user-profile-picture td').insertAdjacentHTML(\"afterbegin\", `<img src=\"${resp.data.avatar_url}\">`);\n          avatarMessage.innerText = \"Avatar are uploaded, you can close modal!\";\n          avatarLabel.classList.add(\"success\");\n        }\n      })\n      .catch(error => {\n        console.error(error);\n      });\n  })\n})\n"],
  "mappings": "MACA,SAAS,iBAAiB,mBAAoBA,GAAK,CACjD,IAAMC,EAAkB,IAAM,CAC5B,SAAS,eAAe,uBAAuB,GAAG,UAAU,OAAO,QAAQ,CAC7E,EAEA,SAAS,cAAc,uBAAuB,GAAG,iBAAiB,QAASD,GAAK,CAC9EC,EAAgB,CAClB,CAAC,EAED,SAAS,cAAc,sCAAsC,GAAG,iBAAiB,QAASD,GAAK,CAC7FC,EAAgB,CAClB,CAAC,EAED,SAAS,cAAc,8BAA8B,GAAG,iBAAiB,SAAUD,GAAK,CACtF,IAAME,EAAc,SAAS,cAAc,6BAA6B,EAClEC,EAAO,IAAI,SACbC,EAAeJ,EAAE,OAAO,MAAM,CAAC,EAC/BK,EAAoB,SAAS,cAAc,uBAAuB,EAAE,MACxEH,EAAY,UAAU,OAAO,SAAS,EACtCC,EAAK,OAAO,SAAU,sBAAsB,EAC5CA,EAAK,OAAO,SAAUC,CAAY,EAClCD,EAAK,OAAO,UAAWE,CAAiB,EAExC,MAAM,IAAI,IAAK,CACb,OAAQ,OACR,YAAa,cACb,KAAMF,CACR,CAAC,EACE,KAAKG,GAAYA,EAAS,KAAK,CAAC,EAChC,KAAKC,GAAQ,CACZ,GAAIA,EAAK,KAAK,aAAe,GAAI,CAC/B,IAAIC,EAAgB,SAAS,cAAc,6BAA6B,EACxE,SAAS,cAAc,0BAA0B,EAAE,MAAQD,EAAK,KAAK,WACrE,SAAS,cAAc,gCAAgC,EAAE,OAAO,EAEhE,SAAS,cAAc,4BAA4B,EAAE,mBAAmB,aAAc,aAAaA,EAAK,KAAK,cAAc,EAC3HC,EAAc,UAAY,4CAC1BN,EAAY,UAAU,IAAI,SAAS,EAEvC,CAAC,EACA,MAAMO,GAAS,CACd,QAAQ,MAAMA,CAAK,CACrB,CAAC,CACL,CAAC,CACH,CAAC",
  "names": ["e", "toggleModalView", "avatarLabel", "data", "selectedFile", "currentEditUserId", "response", "resp", "avatarMessage", "error"]
}
