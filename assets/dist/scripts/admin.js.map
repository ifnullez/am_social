{"mappings":"AEAA,gCAAgC;AAChC,SAAS,gBAAA,CAAiB,mBAAoB,AAAA,IAC5C,IAAM,EAAkB,KACtB,SAAS,cAAA,CAAe,0BAA0B,UAAU,OAAO,SACrE,CACA,cAAa;AACb,SAAS,aAAA,CAAc,0BAA0B,iBAAiB,QAAS,AAAA,IACzE,GACF,GACA,cAAc;AACd,SAAS,aAAA,CAAc,yCAAyC,iBAAiB,QAAS,AAAA,IACxF,GACF,GAEA,SAAS,aAAA,CAAc,iCAAiC,iBAAiB,SAAU,AAAA,IACjF,IAAM,EAAc,SAAS,aAAA,CAAc,+BACrC,EAAO,IAAI,SACb,EAAe,EAAE,MAAA,CAAO,KAAK,CAAC,EAAE,CAChC,EAAoB,SAAS,aAAA,CAAc,yBAAyB,KAAxE,CACA,EAAY,SAAA,CAAU,MAAA,CAAO,WAC7B,EAAK,MAAA,CAAO,SAAU,wBACtB,EAAK,MAAA,CAAO,SAAU,GACtB,EAAK,MAAA,CAAO,UAAW,GAEvB,MAAM,IAAI,GAAA,CAAK,CACb,OAAQ,OACR,YAAa,cACb,KAAM,CACR,GACG,IAAA,CAAK,AAAA,GAAY,EAAS,IAAA,IAC1B,IAAA,CAAK,AAAA,IACJ,GAAI,AAAyB,KAAzB,EAAK,IAAA,CAAK,UAAA,CAAmB,CAC/B,IAAI,EAAgB,SAAS,aAAA,CAAc,8BAC3C,CAAA,SAAS,aAAA,CAAc,4BAA4B,KAAA,CAAQ,EAAK,IAAA,CAAK,UAArE,CACA,SAAS,aAAA,CAAc,kCAAkC,MAAzD,GACA,gCAAgC;AAChC,SAAS,aAAA,CAAc,8BAA8B,kBAAA,CAAmB,aAAc,CAAC,UAAU,EAAE,EAAK,IAAA,CAAK,UAAA,CAAW,EAAE,CAAC,EAC3H,EAAc,SAAA,CAAY,4CAC1B,EAAY,SAAA,CAAU,GAAA,CAAI,UAC5B,CACF,GACC,KAAA,CAAM,AAAA,IACL,QAAQ,KAAA,CAAM,EAChB,EACJ,EACF,E,kC","sources":["<anon>","assets/src/scripts/admin.js","assets/src/scripts/_partials/_admin/_user/_user_avatar.js"],"sourcesContent":["(() => {\n// wait until document is loaded\ndocument.addEventListener(\"DOMContentLoaded\", (e)=>{\n    const toggleModalView = ()=>{\n        document.getElementById(\"profile-avatar-picker\")?.classList.toggle(\"hidden\");\n    };\n    // show modal\n    document.querySelector(\".user-profile-picture\")?.addEventListener(\"click\", (e)=>{\n        toggleModalView();\n    });\n    // close modal\n    document.querySelector(\".profile-avatar-picker--modal--close\")?.addEventListener(\"click\", (e)=>{\n        toggleModalView();\n    });\n    document.querySelector('input[name=\"profile_avatar\"]')?.addEventListener(\"change\", (e)=>{\n        const avatarLabel = document.querySelector('label[for=\"profile_avatar\"]');\n        const data = new FormData();\n        let selectedFile = e.target.files[0];\n        let currentEditUserId = document.querySelector('input[name=\"user_id\"]').value;\n        avatarLabel.classList.remove(\"success\");\n        data.append(\"action\", \"setUploadedAvatarUrl\");\n        data.append(\"avatar\", selectedFile);\n        data.append(\"user_id\", currentEditUserId);\n        fetch(ams.url, {\n            method: \"POST\",\n            credentials: \"same-origin\",\n            body: data\n        }).then((response)=>response.json()).then((resp)=>{\n            if (resp.data.avatar_url !== \"\") {\n                let avatarMessage = document.querySelector(\"span.profile_avatar_message\");\n                document.querySelector('input[name=\"avatar_url\"]').value = resp.data.avatar_url;\n                document.querySelector(\"tr.user-profile-picture td img\").remove();\n                // TODO: fix image live changing\n                document.querySelector(\"tr.user-profile-picture td\").insertAdjacentHTML(\"afterbegin\", `<img src=\"${resp.data.avatar_url}\">`);\n                avatarMessage.innerText = \"Avatar are uploaded, you can close modal!\";\n                avatarLabel.classList.add(\"success\");\n            }\n        }).catch((error)=>{\n            console.error(error);\n        });\n    });\n});\n\n\n\n})();\n//# sourceMappingURL=admin.js.map\n","import \"./_partials/_admin/_user/_user_avatar\";\n","// wait until document is loaded\ndocument.addEventListener('DOMContentLoaded', e => {\n  const toggleModalView = () => {\n    document.getElementById(\"profile-avatar-picker\")?.classList.toggle(\"hidden\");\n  }\n  // show modal\n  document.querySelector('.user-profile-picture')?.addEventListener('click', e => {\n    toggleModalView()\n  })\n  // close modal\n  document.querySelector('.profile-avatar-picker--modal--close')?.addEventListener('click', e => {\n    toggleModalView()\n  })\n\n  document.querySelector('input[name=\"profile_avatar\"]')?.addEventListener('change', e => {\n    const avatarLabel = document.querySelector('label[for=\"profile_avatar\"]');\n    const data = new FormData();\n    let selectedFile = e.target.files[0];\n    let currentEditUserId = document.querySelector('input[name=\"user_id\"]').value;\n    avatarLabel.classList.remove(\"success\");\n    data.append(\"action\", \"setUploadedAvatarUrl\");\n    data.append(\"avatar\", selectedFile);\n    data.append(\"user_id\", currentEditUserId);\n\n    fetch(ams.url, {\n      method: \"POST\",\n      credentials: 'same-origin',\n      body: data\n    })\n      .then(response => response.json())\n      .then(resp => {\n        if (resp.data.avatar_url !== \"\") {\n          let avatarMessage = document.querySelector('span.profile_avatar_message');\n          document.querySelector('input[name=\"avatar_url\"]').value = resp.data.avatar_url;\n          document.querySelector('tr.user-profile-picture td img').remove()\n          // TODO: fix image live changing\n          document.querySelector('tr.user-profile-picture td').insertAdjacentHTML(\"afterbegin\", `<img src=\"${resp.data.avatar_url}\">`);\n          avatarMessage.innerText = \"Avatar are uploaded, you can close modal!\";\n          avatarLabel.classList.add(\"success\");\n        }\n      })\n      .catch(error => {\n        console.error(error);\n      });\n  })\n})\n"],"names":["document","addEventListener","e","toggleModalView","getElementById","classList","toggle","querySelector","avatarLabel","data","FormData","selectedFile","target","files","currentEditUserId","value","remove","append","fetch","ams","url","method","credentials","body","then","response","json","resp","avatar_url","avatarMessage","insertAdjacentHTML","innerText","add","catch","error","console"],"version":3,"file":"admin.js.map"}